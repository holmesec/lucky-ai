workerPoolSpecs:
- machineSpec:
    machineType: n1-standard-4
    acceleratorType: NVIDIA_TESLA_T4
    acceleratorCount: 1
  replicaCount: 1
  containerSpec:
    imageUri: europe-west1-docker.pkg.dev/${PROJECT_ID}/lucky-ai-repo/train-image:${IMAGE_TAG}
    command: ["python", "src/lucky_ai/train.py"]
    args:
      - "data.batch_size=${BATCH_SIZE}"
      - "model.lr=${LR}"
      - "training.max_epochs=${MAX_EPOCHS}"
      - "data.num_workers=${NUM_WORKERS}"
      - "data.path=${DATA_PATH}"
    env:
      - name: WANDB_API_KEY
        value: "${WANDB_API_KEY}"
      - name: MODEL_ALIAS
        value: "sha-${IMAGE_TAG}"
